<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Test Report</title>
    <style>
        :root {
            --primary-color: #4a6da7;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        body { font-family: 'Segoe UI', Roboto, Arial, sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background-color: var(--primary-color); color: white; padding: 20px; border-radius: 5px 5px 0 0; }
        .header h1 { margin: 0; font-size: 24px; }
        .info-bar { background-color: white; padding: 15px; display: flex; justify-content: space-between; border-bottom: 1px solid #ddd; }
        .info-item { font-size: 14px; }
        .summary { display: flex; justify-content: space-between; margin: 20px 0; }
        .summary-card { flex: 1; max-width: 24%; background-color: white; border-radius: 5px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
        .summary-card.total { border-top: 4px solid var(--primary-color); }
        .summary-card.passed { border-top: 4px solid var(--success-color); }
        .summary-card.failed { border-top: 4px solid var(--danger-color); }
        .summary-card.skipped { border-top: 4px solid var(--warning-color); }
        .summary-value { font-size: 36px; font-weight: bold; margin: 10px 0; }
        .summary-label { color: #666; font-size: 14px; }
        .card { background-color: white; border-radius: 5px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .card-header { padding: 15px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
        .card-title { margin: 0; font-size: 18px; color: var(--dark-color); }
        .card-body { padding: 15px; }
        .tabs { display: flex; margin-bottom: 15px; border-bottom: 1px solid #ddd; }
        .tab { padding: 10px 15px; cursor: pointer; border-radius: 4px 4px 0 0; margin-right: 5px; }
        .tab.active { background-color: var(--primary-color); color: white; }
        .tab:not(.active) { background-color: #eee; }
        .tab:hover:not(.active) { background-color: #ddd; }
        table { width: 100%; border-collapse: collapse; }
        th { padding: 12px 15px; text-align: left; background-color: #f8f9fa; border-bottom: 2px solid #ddd; font-weight: 600; }
        td { padding: 10px 15px; border-bottom: 1px solid #eee; }
        tr:hover { background-color: #f5f5f5; }
        .badge { padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: 600; }
        .badge-success { background-color: #e8f5e9; color: var(--success-color); }
        .badge-danger { background-color: #ffebee; color: var(--danger-color); }
        .badge-warning { background-color: #fff8e1; color: #f57c00; }
        .details-btn { background-color: var(--primary-color); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .details-btn:hover { background-color: #3c5a8a; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 20px; border-radius: 5px; width: 80%; max-width: 900px; max-height: 80vh; overflow-y: auto; position: relative; }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 24px; font-weight: bold; cursor: pointer; color: #888; }
        .close-btn:hover { color: #333; }
        .test-info { margin-bottom: 20px; }
        .test-info h3 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .test-info p { margin: 5px 0; line-height: 1.6; }
        .test-logs { background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; padding: 10px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px; white-space: pre-wrap; }
        .screenshot-area { margin-top: 20px; text-align: center; }
        .screenshot-area img { max-width: 100%; max-height: 400px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; }
        .no-data { text-align: center; padding: 30px; color: #666; font-style: italic; }
        .search-box { padding: 10px; display: flex; }
        .search-input { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-right: 10px; }
        .search-btn { background-color: var(--primary-color); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        .search-btn:hover { background-color: #3c5a8a; }
        .progress-container { height: 5px; width: 100%; background-color: #eee; margin-top: 10px; border-radius: 3px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--success-color); border-radius: 3px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Detailed Test Report</h1>
        </div>
        <div class="info-bar">
            <div class="info-item">
                <strong>Date:</strong> 06 March 2025
            </div>
            <div class="info-item">
                <strong>Duration:</strong> 1m 2s
            </div>
            <div class="info-item">
                <strong>OS:</strong> Windows 10
            </div>
            <div class="info-item">
                <strong>User:</strong> Admin
            </div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" style="width: 33.3%;"></div>        </div>
        <div class="summary">
            <div class="summary-card total">
                <div class="summary-label">Total Tests</div>
                <div class="summary-value">3</div>
            </div>
            <div class="summary-card passed">
                <div class="summary-label">Passed</div>
                <div class="summary-value">1</div>
                <div>33.3%</div>            </div>
            <div class="summary-card failed">
                <div class="summary-label">Failed</div>
                <div class="summary-value">2</div>
                <div>66.7%</div>            </div>
            <div class="summary-card skipped">
                <div class="summary-label">Skipped</div>
                <div class="summary-value">0</div>
                <div>0.0%</div>            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Test Execution Details</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search test names...">
                    <button class="search-btn" onclick="searchTests()">Search</button>
                </div>
            </div>
            <div class="card-body">
                <div class="tabs">
                    <div class="tab active" onclick="filterTests('all')">All Tests (3)</div>
                    <div class="tab" onclick="filterTests('passed')">Passed (1)</div>
                    <div class="tab" onclick="filterTests('failed')">Failed (2)</div>
                    <div class="tab" onclick="filterTests('skipped')">Skipped (0)</div>
                </div>
                <table id="testTable">
                    <thead>
                        <tr>
                            <th>Test Name</th>
                            <th>Class</th>
                            <th>Browser</th>
                            <th>Duration</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="test-row" data-status="pass">
                            <td>Login > 2FA verification > Disable 2FA in Org Settings > Re-login without 2FA.</td>
                            <td>DeploySmokeTestOnChrome.TC0001_Login</td>
                            <td>chrome 133.0.6943.142</td>
                            <td>46.15s</td>
                            <td><span class="badge badge-success">Passed</span></td>
                            <td><button class="details-btn" onclick="showTestDetails('Login > 2FA verification > Disable 2FA in Org Settings > Re-login without 2FA.')">View Details</button></td>
                        </tr>
                        <tr class="test-row" data-status="fail">
                            <td>Select Workstation(s) > Assign Group > Verify Group Assignment</td>
                            <td>DeploySmokeTestOnChrome.TC0003_Addgroup</td>
                            <td>chrome 133.0.6943.142</td>
                            <td>6.10s</td>
                            <td><span class="badge badge-danger">Failed</span></td>
                            <td><button class="details-btn" onclick="showTestDetails('Select Workstation(s) > Assign Group > Verify Group Assignment')">View Details</button></td>
                        </tr>
                        <tr class="test-row" data-status="fail">
                            <td>Select Workstation(s) > Add Tag > Verify Tag Assignment</td>
                            <td>DeploySmokeTestOnChrome.TC0004_Assigntag</td>
                            <td>chrome 133.0.6943.142</td>
                            <td>9.89s</td>
                            <td><span class="badge badge-danger">Failed</span></td>
                            <td><button class="details-btn" onclick="showTestDetails('Select Workstation(s) > Add Tag > Verify Tag Assignment')">View Details</button></td>
                        </tr>
                    </tbody>
                </table>
                <div id="noResults" class="no-data" style="display: none;">No matching tests found</div>
            </div>
        </div>
        <div id="testDetailsModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal()">&times;</span>
                <div class="test-info">
                    <h3 id="modalTestName">Test Details</h3>
                    <p><strong>Status:</strong> <span id="modalStatus"></span></p>
                    <p><strong>Browser:</strong> <span id="modalBrowser"></span></p>
                    <p><strong>Class:</strong> <span id="modalClass"></span></p>
                    <p><strong>Duration:</strong> <span id="modalDuration"></span></p>
                    <p><strong>Start Time:</strong> <span id="modalStartTime"></span></p>
                    <p><strong>End Time:</strong> <span id="modalEndTime"></span></p>
                    <p id="modalErrorContainer" style="display: none;"><strong>Error:</strong> <span id="modalError"></span></p>
                </div>
                <h4>Test Logs:</h4>
                <div id="modalLogs" class="test-logs"></div>
                <div id="modalScreenshot" class="screenshot-area"></div>
            </div>
        </div>
    </div>
    <script>
        // Store test data for details modal
        const testData = {
            'Login > 2FA verification > Disable 2FA in Org Settings > Re-login without 2FA.': {
                status: 'PASS',
                browser: 'chrome 133.0.6943.142',
                platform: 'windows',
                className: 'DeploySmokeTestOnChrome.TC0001_Login',
                duration: '46.15s',
                startTime: '18:39:55.232',
                endTime: '18:40:41.380',
                logs: `[18:40:23.123] Check console log for login
[18:40:41.377] Login successfull.
`,
                error: null,
                screenshot: null
            },
            'Select Workstation(s) > Assign Group > Verify Group Assignment': {
                status: 'FAIL',
                browser: 'chrome 133.0.6943.142',
                platform: 'windows',
                className: 'DeploySmokeTestOnChrome.TC0003_Addgroup',
                duration: '6.10s',
                startTime: '18:40:41.390',
                endTime: '18:40:47.488',
                logs: ``,
                error: `no such element: Unable to locate element: {"method":"xpath","selector":"//input[@id='txtLoginEmail']"}
  (Session info: chrome=133.0.6943.142)
For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Build info: version: '4.25.0', revision: '8a8aea2337'
System info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '21.0.2'
Driver info: org.openqa.selenium.chrome.ChromeDriver
Command: [c63b6a11d984fee833c0f47b457efa82, findElement {using=xpath, value=//input[@id='txtLoginEmail']}]
Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 133.0.6943.142, chrome: {chromedriverVersion: 133.0.6943.141 (2a5d6da0d61..., userDataDir: C:\Users\Admin\AppData\Loca...}, fedcm:accounts: true, goog:chromeOptions: {debuggerAddress: localhost:65109}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:65109/devtoo..., se:cdpVersion: 133.0.6943.142, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}
Session ID: c63b6a11d984fee833c0f47b457efa82`,
                screenshot: 'file:///D:/New Machine/FailedTestImage/addgroup.png'
            },
            'Select Workstation(s) > Add Tag > Verify Tag Assignment': {
                status: 'FAIL',
                browser: 'chrome 133.0.6943.142',
                platform: 'windows',
                className: 'DeploySmokeTestOnChrome.TC0004_Assigntag',
                duration: '9.89s',
                startTime: '18:40:51.202',
                endTime: '18:41:01.096',
                logs: ``,
                error: `element click intercepted: Element <button class="btn btnWhite customAppButton" type="button" data-dismiss="modal">...</button> is not clickable at point (1166, 527). Other element would receive the click: <div id="dvCreateNewTagPopup" class="modal fade show" style="z-index: 1100; display: block;" data-backdrop="static" aria-modal="true">...</div>
  (Session info: chrome=133.0.6943.142)
Build info: version: '4.25.0', revision: '8a8aea2337'
System info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '21.0.2'
Driver info: org.openqa.selenium.chrome.ChromeDriver
Command: [c63b6a11d984fee833c0f47b457efa82, clickElement {id=f.34593AF1D74986DEAF962D8B6273C17D.d.C9158963FD5C169EBE911DE8DD72FAE6.e.1444}]
Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 133.0.6943.142, chrome: {chromedriverVersion: 133.0.6943.141 (2a5d6da0d61..., userDataDir: C:\Users\Admin\AppData\Loca...}, fedcm:accounts: true, goog:chromeOptions: {debuggerAddress: localhost:65109}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:65109/devtoo..., se:cdpVersion: 133.0.6943.142, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}
Element: [[ChromeDriver: chrome on windows (c63b6a11d984fee833c0f47b457efa82)] -> xpath: //button[text()='Done']]
Session ID: c63b6a11d984fee833c0f47b457efa82`,
                screenshot: 'file:///D:/New Machine/FailedTestImage/assigntag.png'
            }
        };
        const modal = document.getElementById('testDetailsModal');
        const searchInput = document.getElementById('searchInput');
        const testRows = document.querySelectorAll('.test-row');
        const noResults = document.getElementById('noResults');

        // Filter tests by status
        function filterTests(status) {
            // Update active tab
            document.querySelectorAll('.tab').forEach(tab => {
                if (tab.innerText.toLowerCase().includes(status) || (status === 'all' && tab.innerText.toLowerCase().includes('all'))) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            // Filter table rows
            let visibleCount = 0;
            testRows.forEach(row => {
                const rowStatus = row.getAttribute('data-status');
                const searchText = searchInput.value.toLowerCase();
                const testName = row.cells[0].innerText.toLowerCase();
                const matchesSearch = searchText === '' || testName.includes(searchText);

                if ((status === 'all' || rowStatus === status) && matchesSearch) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            // Show/hide no results message
            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }

        // Search function
        function searchTests() {
            const activeTab = document.querySelector('.tab.active');
            const status = activeTab.innerText.toLowerCase().includes('all') ? 'all' :
                         activeTab.innerText.toLowerCase().includes('passed') ? 'passed' :
                         activeTab.innerText.toLowerCase().includes('failed') ? 'failed' : 'skipped';
            filterTests(status);
        }

        // Search on Enter key press
        searchInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                searchTests();
            }
        });

        // Show test details in modal
        function showTestDetails(testName) {
            const test = testData[testName];
            if (!test) return;

            // Set modal content
            document.getElementById('modalTestName').textContent = testName;
            
            // Set status with appropriate styling
            const statusSpan = document.getElementById('modalStatus');
            let statusClass = '';
            let statusText = '';
            
            switch (test.status) {
                case 'PASS':
                    statusClass = 'badge-success';
                    statusText = 'Passed';
                    break;
                case 'FAIL':
                    statusClass = 'badge-danger';
                    statusText = 'Failed';
                    break;
                case 'SKIP':
                    statusClass = 'badge-warning';
                    statusText = 'Skipped';
                    break;
                default:
                    statusText = test.status;
            }
            
            statusSpan.innerHTML = `<span class="badge ${statusClass}">${statusText}</span>`;
            
            // Set other test details
            document.getElementById('modalBrowser').textContent = test.browser;
            document.getElementById('modalClass').textContent = test.className;
            document.getElementById('modalDuration').textContent = test.duration;
            document.getElementById('modalStartTime').textContent = test.startTime;
            document.getElementById('modalEndTime').textContent = test.endTime;
            
            // Handle error message if present
            const errorContainer = document.getElementById('modalErrorContainer');
            if (test.error) {
                document.getElementById('modalError').textContent = test.error;
                errorContainer.style.display = 'block';
            } else {
                errorContainer.style.display = 'none';
            }
            
            // Set logs
            document.getElementById('modalLogs').innerHTML = test.logs.replace(/\n/g, '<br>');
            
            // Handle screenshot if available
            const screenshotArea = document.getElementById('modalScreenshot');
            if (test.screenshot) {
                screenshotArea.innerHTML = `
                    <h4>Screenshot:</h4>
                    <img src="${test.screenshot}" onclick="window.open(this.src)" alt="Test Screenshot">
                `;
            } else {
                screenshotArea.innerHTML = '';
            }
            
            // Show modal
            modal.style.display = 'block';
        }
        
        // Close modal
        function closeModal() {
            modal.style.display = 'none';
        }
        
        // Close modal when clicking outside of it
        window.onclick = function(event) {
            if (event.target === modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>
